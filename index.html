<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truyện Tranh Online</title>
    <style>
        :root {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --header-bg: #1f1f1f;
            --accent: #ff4757;
        }
        body { margin: 0; padding: 0; background: var(--bg-color); color: var(--text-color); font-family: sans-serif; }
        
        /* Header */
        header {
            position: fixed; top: 0; left: 0; right: 0;
            background: var(--header-bg); padding: 10px 20px;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 100; border-bottom: 1px solid #333; box-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }
        h1 { margin: 0; font-size: 1.1rem; color: var(--accent); }
        
        .controls { display: flex; gap: 10px; }
        button {
            padding: 8px 12px; border-radius: 4px; border: 1px solid #444;
            background: #2c2c2c; color: white; cursor: pointer; font-size: 0.9rem;
        }
        button:hover { background: #444; }
        button.active { background: var(--accent); border-color: var(--accent); }

        /* Reader Area */
        #reader {
            margin-top: 60px; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
            padding-bottom: 50px;
        }
        
        .page-container {
            position: relative;
            min-height: 200px;
            min-width: 300px;
            display: flex; justify-content: center; align-items: center;
            background: #1a1a1a;
            margin-bottom: 5px;
        }

        img.page {
            max-width: 100%; height: auto; display: block;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }

        /* Hiển thị lỗi nếu không thấy ảnh */
        .error-msg {
            color: #ff6b6b; border: 1px dashed #ff6b6b; padding: 20px;
            display: none; text-align: center;
        }
        img.page[src=""] + .error-msg, img.page:not([src]) + .error-msg { display: block; }

        /* Webtoon Mode (Mặc định) */
        .mode-webtoon img.page { width: 100%; max-width: 800px; }

        /* Manga Mode (Từng trang) */
        .mode-manga { flex-direction: row; justify-content: center; height: calc(100vh - 60px); overflow: hidden; }
        .mode-manga .page-container { display: none; height: 100%; width: 100%; }
        .mode-manga .page-container.active { display: flex; }
        .mode-manga img.page { max-height: 100%; max-width: 100%; object-fit: contain; }

        /* Nút điều hướng */
        .nav-btn {
            position: fixed; top: 50%; transform: translateY(-50%);
            background: rgba(0,0,0,0.6); color: white; border: none;
            padding: 15px; font-size: 24px; cursor: pointer; display: none; z-index: 10;
            border-radius: 50%; width: 50px; height: 50px;
        }
        .nav-btn:hover { background: var(--accent); }
        .prev { left: 10px; }
        .next { right: 10px; }
        
        /* Số trang */
        .page-indicator {
            position: fixed; bottom: 10px; right: 20px;
            background: rgba(0,0,0,0.7); padding: 5px 10px; border-radius: 15px;
            font-size: 0.8rem; pointer-events: none;
        }
    </style>
</head>
<body>

<header>
    <h1>Truyện Của Tôi</h1>
    <div class="controls">
        <button id="btnWebtoon" class="active" onclick="setMode('webtoon')">Cuộn dọc</button>
        <button id="btnManga" onclick="setMode('manga')">Từng trang</button>
    </div>
</header>

<div id="reader" class="mode-webtoon">
    </div>

<div class="page-indicator" id="pageIndicator">Trang 1 / 13</div>
<button class="nav-btn prev" onclick="changePage(-1)">❮</button>
<button class="nav-btn next" onclick="changePage(1)">❯</button>

<script>
    // ==========================================
    // CẤU HÌNH TỰ ĐỘNG (Đã chỉnh sẵn cho bạn)
    // ==========================================
    const config = {
        folderName: "images",   // Tên thư mục chứa ảnh
        filePrefix: "",         // Tiền tố tên file (để trống vì bạn dùng số 1, 2...)
        fileExtension: ".jpg",  // Đuôi file ảnh
        totalImages: 13,        // Tổng số ảnh (1 đến 13)
        startIndex: 1           // Bắt đầu từ số 1
    };

    const reader = document.getElementById('reader');
    const indicator = document.getElementById('pageIndicator');
    const navBtns = document.querySelectorAll('.nav-btn');
    let currentMode = 'webtoon';
    let currentPageIndex = 0;
    let pages = [];

    // 1. Tạo danh sách ảnh tự động
    function init() {
        reader.innerHTML = '';
        pages = [];
        
        for (let i = config.startIndex; i <= config.totalImages; i++) {
            // Tạo đường dẫn: images/1.jpg
            let src = `${config.folderName}/${config.filePrefix}${i}${config.fileExtension}`;
            
            // Tạo HTML
            let container = document.createElement('div');
            container.className = 'page-container';
            if (i === config.startIndex) container.classList.add('active');

            let img = document.createElement('img');
            img.src = src;
            img.className = 'page';
            img.onerror = function() { 
                this.style.display = 'none'; // Ẩn ảnh lỗi
                this.nextElementSibling.style.display = 'block'; // Hiện thông báo lỗi
                this.nextElementSibling.textContent = `❌ Lỗi: Không tìm thấy file "${src}"`;
            };

            let errorMsg = document.createElement('div');
            errorMsg.className = 'error-msg';
            
            container.appendChild(img);
            container.appendChild(errorMsg);
            reader.appendChild(container);
            pages.push(container);
        }
        updateIndicator();
    }

    // 2. Chuyển chế độ
    function setMode(mode) {
        currentMode = mode;
        reader.className = `mode-${mode}`;
        
        document.getElementById('btnWebtoon').classList.toggle('active', mode === 'webtoon');
        document.getElementById('btnManga').classList.toggle('active', mode === 'manga');
        
        navBtns.forEach(btn => btn.style.display = mode === 'manga' ? 'block' : 'none');
        
        if(mode === 'webtoon') {
            pages.forEach(p => p.style.display = 'flex');
            window.scrollTo(0,0);
        } else {
            // Reset về trang 1 khi chuyển sang manga
            currentPageIndex = 0;
            updateMangaView();
        }
    }

    // 3. Chuyển trang (Manga Mode)
    function changePage(step) {
        if (currentMode !== 'manga') return;
        
        let newIndex = currentPageIndex + step;
        if (newIndex >= 0 && newIndex < pages.length) {
            pages[currentPageIndex].classList.remove('active');
            currentPageIndex = newIndex;
            pages[currentPageIndex].classList.add('active');
            updateIndicator();
        }
    }

    function updateMangaView() {
        pages.forEach((p, index) => {
            if (index === currentPageIndex) p.classList.add('active');
            else p.classList.remove('active');
        });
        updateIndicator();
    }

    function updateIndicator() {
        if (currentMode === 'manga') {
            indicator.innerText = `Trang ${currentPageIndex + 1} / ${config.totalImages}`;
        } else {
            indicator.innerText = `Cuộn dọc (${config.totalImages} trang)`;
        }
    }

    // Phím tắt
    document.addEventListener('keydown', (e) => {
        if (currentMode === 'manga') {
            if (e.key === 'ArrowLeft') changePage(-1);
            if (e.key === 'ArrowRight') changePage(1);
        }
    });

    init();
</script>

</body>
</html>